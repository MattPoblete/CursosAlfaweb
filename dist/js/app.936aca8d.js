(function(t){function e(e){for(var r,i,u=e[0],s=e[1],c=e[2],l=0,d=[];l<u.length;l++)i=u[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);f&&f(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(o.splice(e--,1),t=u(u.s=n[0]))}return t}var r={},a={app:0},o=[];function i(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-0e89cda5":"9dc4e919","chunk-2d21a3d2":"7f14e640","chunk-5311fe18":"04c6f2b6","chunk-acf33b7e":"7995a1cd"}[t]+".js"}function u(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n=a[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,r){n=a[t]=[e,r]}));e.push(n[2]=r);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,u.nc&&s.setAttribute("nonce",u.nc),s.src=i(t);var c=new Error;o=function(e){s.onerror=s.onload=null,clearTimeout(l);var n=a[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,n[1](c)}a[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(e)},u.m=t,u.c=r,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var f=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",[n("b-navbar",{staticStyle:{"background-color":"#673AB7"},attrs:{toggleable:"true",type:"dark"}},[n("div",{staticClass:"m-0 p-0"},[t.authUser.logged?n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}):t._e(),n("b-navbar-brand",{staticClass:"ml-3",attrs:{to:""}},[t._v("Cursos Alfaweb")])],1),t.authUser.logged?n("div",[n("b-nav-text",[t._v(t._s(t.authUser.user))]),n("b-button",{staticClass:"mx-3",attrs:{size:"sm",icon:"box-arrow-right",variant:"danger"},on:{click:t.salir}},[n("b-icon-box-arrow-right")],1)],1):t._e(),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-item",{attrs:{to:{name:"home"}}},[t._v("Inicio")]),n("b-nav-item",{attrs:{to:{name:"administracion"}}},[t._v("Administrar cursos")])],1)],1)],1)],1),n("router-view")],1)},o=[],i=n("5530"),u=n("4f60"),s=n("2f62"),c={created:function(){this.checkAuth(),this.getCursos()},computed:Object(i["a"])({},Object(s["d"])(["authUser"])),methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["logout","checkAuth","getCursos"])),{},{salir:function(){var t=this;this.logout().then((function(){return t.$router.push({name:"login"})}))},usr:function(){console.log(u["a"].auth().currentUser)}})},l=c,f=(n("034f"),n("2877")),d=Object(f["a"])(l,a,o,!1,null,null,null),p=d.exports,m=n("1da1"),h=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"my-3"},[n("h1",[t._v("Login de usuario")]),n("div",[n("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[n("b-form-group",{attrs:{id:"input-group-1",label:"Email:","label-for":"input-1"}},[n("b-form-input",{attrs:{id:"input-1",type:"email",placeholder:"E-mail"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),n("b-form-group",{attrs:{id:"input-group-2",label:"Email:","label-for":"input-2"}},[n("b-form-input",{attrs:{id:"input-2",type:"password",placeholder:"Password"},model:{value:t.form.pass,callback:function(e){t.$set(t.form,"pass",e)},expression:"form.pass"}})],1),n("b-button",{staticClass:"mr-3",attrs:{type:"submit",variant:"success"}},[t._v("Iniciar Sesión")]),n("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Limpiar formulario")]),n("b-button",{staticClass:"ml-3",attrs:{variant:"primary",to:{name:"register"}}},[t._v("Registrarse")])],1)],1)])},g=[],v={data:function(){return{form:{email:"admin@alfaweb.com",pass:"password"}}},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["login"])),{},{onSubmit:function(t){var e=this;t.preventDefault(),this.login({email:this.form.email,pass:this.form.pass}).then((function(){return e.$router.push({name:"home"})})).catch((function(){return alert("a")}))},onReset:function(t){t.preventDefault(),this.form.email="",this.form.pass=""}})},w=v,y=Object(f["a"])(w,b,g,!1,null,null,null),O=y.exports,j=function(){return n.e("chunk-2d21a3d2").then(n.bind(null,"bb51"))},k=function(){return n.e("chunk-5311fe18").then(n.bind(null,"73cf"))},C=function(){return n.e("chunk-acf33b7e").then(n.bind(null,"529d"))},_=function(){return n.e("chunk-0e89cda5").then(n.bind(null,"1a24"))};r["default"].use(h["a"]);var x=[{path:"/",name:"home",component:j,meta:{login:!0}},{path:"/login",name:"login",component:O},{path:"/register",name:"register",component:k},{path:"/administracion",name:"administracion",component:C,meta:{login:!0}},{path:"/editar/:id",name:"editar",component:_,props:!0,meta:{login:!0}},{path:"/*",redirect:"/login"}],S=new h["a"]({mode:"history",base:"/",routes:x});S.beforeEach(function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e,n,r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=u["a"].auth().currentUser,o=e.matched.some((function(t){return t.meta.login})),!a&&o?r("login"):r();case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}());var A=S;n("159b");r["default"].use(s["a"]);var U=new s["a"].Store({state:{authUser:{user:"",logged:!1},cursos:[]},mutations:{setAuth:function(t,e){t.authUser.user=e,t.authUser.logged=!0},LOGOUT:function(t){t.authUser.user="",t.authUser.logged=!1},setCursos:function(t,e){t.cursos=e}},actions:{login:function(t,e){return new Promise((function(n,r){u["a"].auth().signInWithEmailAndPassword(e.email,e.pass).then((function(e){t.commit("setAuth",e.user._delegate.email),n()})).catch((function(){r("Email o contraseña inválidos")}))}))},logout:function(t){return new Promise((function(e,n){u["a"].auth().signOut().then((function(){t.commit("LOGOUT"),e()})).catch((function(t){return n(t)}))}))},register:function(t,e){return new Promise((function(t,n){u["a"].auth().createUserWithEmailAndPassword(e.email,e.pass).then((function(){t()})).catch((function(t){return n(t)}))}))},checkAuth:function(t){u["a"].auth().onAuthStateChanged((function(e){e?t.commit("setAuth",e.email):t.commit("LOGOUT")}))},getCursos:function(t){var e=t.commit;u["a"].firestore().collection("cursos").onSnapshot((function(t){var n=[];t.forEach((function(t){n.push({id:t.id,data:t.data()})})),e("setCursos",n)}))},addCurso:function(t,e){u["a"].firestore().collection("cursos").add(e)},delCurso:function(t,e){u["a"].firestore().collection("cursos").doc(e).delete()},editCurso:function(t,e){var n=e.id,r=e.data;u["a"].firestore().collection("cursos").doc(n).update(r)},getCurso:function(t,e){return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].firestore().collection("cursos").get(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}},getters:{GETCURSOS:function(t){return t.cursos}},modules:{}}),E=(n("256a"),n("1862"),n("5f5b")),P=n("b1e0");n("f9e3"),n("2dd8");r["default"].use(E["a"]),r["default"].use(P["a"]);var R,T={apiKey:"AIzaSyDJrMionBImpjoDW4Cz4umxdRgB6LfQSRE",authDomain:"alfaweb-e52df.firebaseapp.com",projectId:"alfaweb-e52df",storageBucket:"alfaweb-e52df.appspot.com",messagingSenderId:"1035273861933",appId:"1:1035273861933:web:8cfca3cebd628baeb1b1a4"};u["a"].initializeApp(T),r["default"].config.productionTip=!1,u["a"].auth().onAuthStateChanged((function(){R||(R=new r["default"]({router:A,store:U,render:function(t){return t(p)}}).$mount("#app"))}))},"85ec":function(t,e,n){}});
//# sourceMappingURL=app.936aca8d.js.map